#include "screen.h"

void GotoXY(int x, int y) {
  	COORD coord;
  	coord.X = x;
 	coord.Y = y;
 	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
}

void SET_COLOR(int color)
{
	WORD wColor;
      HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
     CONSOLE_SCREEN_BUFFER_INFO csbi;
     if(GetConsoleScreenBufferInfo(hStdOut, &csbi))
     {
          wColor = (csbi.wAttributes & 0xF0) + (color & 0x0F);
          SetConsoleTextAttribute(hStdOut, wColor);
	}
}

Screen::Screen(int width_, int height_) : width(width_), height(height_) {} 

void Screen::draw() {
    char edge = 219;
	string choose[5] = {"0111110 1111110 0111110 0111111 0111111 11 11100011 01111110    1111110 0111110 0111110 1111110",
					  "1100011 1100011 1100011 1100000 1100000 11 11110011 11000000    1100011 1100011 1100011 1100011",
					  "1100000 1111110 1100011 0111110 0111110 11 11011011 11000110    1111110 1100011 1111111 1100011",
					  "1100011 1100011 1100011 0000011 0000011 11 11001111 11000011    1100011 1100011 1100011 1100011",
					  "0111110 1100011 0111110 1111110 1111110 11 11000111 01111110    1100011 0111110 1100011 1111110"};
	for(int i=0;i<5;i++){
		for(int j=0;j<choose[i].length();j++){
			GotoXY(j+36,i+3);
			if(choose[i][j]=='1'){
				appConsole.setTextColor(WHITE);
				cout << edge;
			}    
			else    {
				appConsole.setBackgroundColor(BG_BLUE);
				cout << " ";
			} 
		}
		cout<<endl;
	}
	char two = 254;
	char three = 178;
	char four = 223;
	char five = 220;
	string frame[27] = {"02222222222222222222222222222222222222222222222222222222222222222222222222220",
					   "33000000000000000000000000000000000000000000000000000000000000000000000000033",
					   "30000000000000000000150010144010001001441014410145410144000000000000000000003",
					   "30000000000000000000101010122010101001055015510101010122000000000000000000003",
					   "30000000000000000000100410155015451001551010010101010155000000000000000000003",
					   "30000000000000000000000000000000000000000000000000000000000000000000000000003",
					   "30000000000000000100001441014410144500144101441014541014400000000000000000003",
					   "30000000000000000100001001015510100100105501551010101012200000000000000000003",
					   "30000000000000000155101551010010155400155101001010101015500000000000000000003",
					   "30000000000000000000000000000000000000000000000000000000000000000000000000003",
					   "30000000000010001440144101445014401441014101441014410144101445000000000000003",
					   "30000000000010001220155101001012201554014501001015510155401001000000000000003",
					   "30000000000015501550100101554015501001015101551010010100101554000000000000003",
					   "30000000000000000000000000000000000000000000000000000000000000000000000000003",
					   "30000000000000000000001441014404140414041401500101441000000000000000000000003",
					   "30000000000000000000004455012200100010001001010101055000000000000000000000003",
					   "30000000000000000000001551015500100010051501004101551000000000000000000000003",
					   "30000000000000000000000000000000000000000000000000000000000000000000000000003",
					   "30000000000000000000000001441014410144014450414041400000000000000000000000003",
					   "30000000000000000000000001000015540122010010010001000000000000000000000000003",
					   "30000000000000000000000001551010010155015540515001000000000000000000000000003",
					   "30000000000000000000000000000000000000000000000000000000000000000000000000003",
					   "30000000000000000000000000001440450540414041400000000000000000000000000000003",
					   "30000000000000000000000000001550001000010001000000000000000000000000000000003",
					   "30000000000000000000000000001550540450515001000000000000000000000000000000003",
					   "33000000000000000000000000000000000000000000000000000000000000000000000000033",
					   "02222222222222222222222222222222222222222222222222222222222222222222222222220"} ;
	for(int i=0;i<27;i++){
		for(int j=0;j<frame[i].length();j++){
			GotoXY(j+45,i+12);
			if(frame[i][j]=='0'){
				appConsole.setBackgroundColor(BG_BLUE);
				cout << " ";
			} 	
			else if(frame[i][j]=='2'){
				appConsole.setBackgroundColor(BG_BLUE);
				SET_COLOR(WHITE);
				if(i>1&&i<26) SET_COLOR(BLACK);
				cout << two;
			}
			else if (frame[i][j]=='1') {
				appConsole.setBackgroundColor(BG_BLUE);
				cout << edge;				
			}	
			else if(frame[i][j]=='3')
			{
				appConsole.setBackgroundColor(BG_BLUE);
				SET_COLOR(WHITE);
				cout << three;
			}
			else if(frame[i][j]=='4'){
				appConsole.setBackgroundColor(BG_BLUE);
				cout << four;
			}
			else if(frame[i][j]=='5'){
				appConsole.setBackgroundColor(BG_BLUE);
				cout << five;
			}
		}
	}
	GotoXY(12,13);
	SET_COLOR(WHITE);
	cout << (char) 42;
	GotoXY(14,15);
	cout << (char) 42;
	GotoXY(4,5);
	cout << (char) 42;
	GotoXY(8,5);
	cout << (char) 42;
	GotoXY(10,19);
	cout << (char) 42;
	GotoXY(12,25);
	cout << (char) 42;
	GotoXY(13,27);
	cout << (char) 42;
	GotoXY(15,33);
	cout << (char) 42;
	SHORT idx = 28;
    
	while(idx > 10){
		stValue:: importImage.drawImage("rocket.txt", {1,idx}, string(1, edge), false);
		Sleep(5);	
        continue;
		idx--;
		if(idx == 10) {
		    	idx = 28;
		}		
   	}
}
